<script>
    document.addEventListener("DOMContentLoaded", function () {
        const ip = "eonverse.club"; // Your server's IP

        fetch(`https://api.mcsrvstat.us/2/${ip}`)
            .then(response => response.json())
            .then(data => {
                const onlineCount = data.players.online || 0;
                const ipElement = document.querySelector(".ip-address");
                const onlineCountElement = document.querySelector(".online-count");

                ipElement.textContent = ip;
                onlineCountElement.textContent = onlineCount;
            })
            .catch(error => {
                console.error("Error fetching server information:", error);
            });

        // Add event listeners to the Buy Now buttons
        const buyNowButtons = document.querySelectorAll('.buyNowBtn');
        buyNowButtons.forEach(button => {
            button.addEventListener('click', function () {
                const rank = this.getAttribute('data-rank');
                payWithPayPal(rank);
            });
        });
    });

    // Replace 'YOUR_PAYPAL_CLIENT_ID' with your actual PayPal client ID
    function payWithPayPal(rank) {
        paypal.Buttons({
            createOrder: function (data, actions) {
                // Set up the transaction details based on the selected rank
                let amount, rankName;

                switch (rank) {
                    case 'VIP':
                        amount = '5.00';
                        rankName = 'VIP';
                        break;
                    case 'VIP+':
                        amount = '7.00';
                        rankName = 'VIP+';
                        break;
                    case 'ULTRA':
                        amount = '10.00';
                        rankName = 'ULTRA';
                        break;
                    case 'LEGEND':
                        amount = '16.00';
                        rankName = 'LEGEND';
                        break;
                    case 'SPECIAL_RANK':
                        amount = '20.00'; // Adjust the amount for the special rank
                        rankName = 'SPECIAL_RANK';
                        break;
                    default:
                        // Handle the default case or provide an error message
                        alert('Invalid rank selected');
                        return;
                }

                return actions.order.create({
                    purchase_units: [{
                        amount: {
                            value: amount,
                            currency_code: 'USD'
                        },
                        description: `Purchase of ${rankName} rank` // Add a description if needed
                    }]
                });
            },
            onError: function (err) {
                // Handle errors during the transaction
                console.error(err);
                alert('An error occurred. Please try again.');
            }
        }).render('#paypal-button-container'); // Replace with the ID of the container element
    }
</script>
